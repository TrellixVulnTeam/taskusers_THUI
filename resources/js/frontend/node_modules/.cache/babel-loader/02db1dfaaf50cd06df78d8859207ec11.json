{"ast":null,"code":"import _objectSpread from\"/home/ivanferrer/projetos/taskusers/resources/js/frontend/task-users/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/ivanferrer/projetos/taskusers/resources/js/frontend/task-users/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ivanferrer/projetos/taskusers/resources/js/frontend/task-users/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ivanferrer/projetos/taskusers/resources/js/frontend/task-users/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ivanferrer/projetos/taskusers/resources/js/frontend/task-users/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export default function withAuth(ComponentToProtect){return/*#__PURE__*/function(_Component){_inherits(_class,_Component);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this.state={loading:true,redirect:false};return _this;}_createClass(_class,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=localStorage.getItem('SessionToken');var headers={'Authorization':\"bearer \".concat(token)};axios.post('http://local.tasks.com.br/auth','',{headers:headers}).then(function(resp){//pass token as header\n_this2.setState({loading:false});}).catch(function(err){console.error(err);_this2.setState({loading:false,redirect:true});});}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,redirect=_this$state.redirect;if(loading){return null;}if(redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(ComponentToProtect,_objectSpread({},this.props))});}}]);return _class;}(Component);}","map":{"version":3,"sources":["/home/ivanferrer/projetos/taskusers/resources/js/frontend/task-users/src/components/utils/WithAuth.jsx"],"names":["React","Component","Redirect","axios","withAuth","ComponentToProtect","state","loading","redirect","token","localStorage","getItem","headers","post","then","resp","setState","catch","err","console","error","props"],"mappings":"s5BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CACA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,kBAAlB,CAAsC,CACnD,qGACE,iBAAc,wCACZ,wBACA,MAAKC,KAAL,CAAa,CACXC,OAAO,CAAE,IADE,CAEXC,QAAQ,CAAE,KAFC,CAAb,CAFY,aAMb,CAPH,oDAQE,4BAAoB,iBAChB,GAAIC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAZ,CACA,GAAIC,CAAAA,OAAO,CAAG,CACV,iCAA2BH,KAA3B,CADU,CAAd,CAGAN,KAAK,CAACU,IAAN,CAAW,gCAAX,CAA4C,EAA5C,CAAgD,CAACD,OAAO,CAAEA,OAAV,CAAhD,EAAqEE,IAArE,CAA0E,SAAAC,IAAI,CAAI,CAAC;AAC/E,MAAI,CAACC,QAAL,CAAe,CAAET,OAAO,CAAE,KAAX,CAAf,EACH,CAFD,EAEGU,KAFH,CAES,SAAAC,GAAG,CAAI,CACZC,OAAO,CAACC,KAAR,CAAcF,GAAd,EACF,MAAI,CAACF,QAAL,CAAc,CAAET,OAAO,CAAE,KAAX,CAAkBC,QAAQ,CAAE,IAA5B,CAAd,EACD,CALD,EAMH,CAnBH,sBAoBE,iBAAS,CACP,gBAA8B,KAAKF,KAAnC,CAAQC,OAAR,aAAQA,OAAR,CAAiBC,QAAjB,aAAiBA,QAAjB,CACA,GAAID,OAAJ,CAAa,CACX,MAAO,KAAP,CACD,CACD,GAAIC,QAAJ,CAAc,CACZ,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CACD,mBACE,KAAC,KAAD,CAAO,QAAP,wBACE,KAAC,kBAAD,kBAAwB,KAAKa,KAA7B,EADF,EADF,CAKD,CAjCH,oBAAqBpB,SAArB,EAmCD","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios'\nexport default function withAuth(ComponentToProtect) {\n  return class extends Component {\n    constructor() {\n      super();\n      this.state = {\n        loading: true,\n        redirect: false,\n      };\n    }\n    componentDidMount() {\n        let token = localStorage.getItem('SessionToken')\n        var headers = {\n            'Authorization': `bearer ${token}`\n        }\n        axios.post('http://local.tasks.com.br/auth','', {headers: headers} ).then(resp => {//pass token as header\n            this.setState( { loading: false } )\n        }).catch(err => {\n            console.error(err);\n          this.setState({ loading: false, redirect: true });\n        })\n    }\n    render() {\n      const { loading, redirect } = this.state;\n      if (loading) {\n        return null;\n      }\n      if (redirect) {\n        return <Redirect to=\"/\" />;\n      }\n      return (\n        <React.Fragment>\n          <ComponentToProtect {...this.props} />\n        </React.Fragment>\n      );\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}